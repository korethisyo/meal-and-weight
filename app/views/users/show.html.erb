<h1>マイページ</h1>

<div class="profile">
  <p><%= attachment_image_tag @user, :user_image, :fill, 150, 130, fallback:"no_image.jpg" %></p>
  <h2><%= @user.nick_name %></h2>
  <p>性別：
    <% if @user.sex == "選択してください" %>
      <%= "" %>
    <% else %>
      <%= @user.sex %>
    <% end %>
  </p>
  <p>身長： <%= @user.height %></p>
  <p>目標体重： <%= @user.target_weight %></p>
  <p>自己紹介<%= @user.introduction %></p>

  <% if @user.id == current_user.id %>
    <div>
      <%= link_to "プロフィールを編集する", edit_user_path(@user.id) %>
    </div>
  <% end %>
</div>

<h1>食事一覧</h1>

<table>
  <tr class="table-header">
    <th></th>
    <th>日付</th>
    <th>メニュー</th>
    <th></th>
    <th></th>
  </tr>
  <% @user.meals.each do |meal| %>
    <tr class="table-body">
      <td>
        <%= link_to meal_path(meal.id) do %>
          <%= attachment_image_tag meal, :menu_image, :fill, 50, 50, fallback:"no_image.jpg" %>
        <% end %>
      </td>
      <td><%= meal.date %></td>
      <td></td>
      <td>コメント数： <%= meal.post_comments.count %></td>
      <td>
        <% if meal.favorited_by?(current_user) %>
          <p>
            いいね数：
            <%= link_to meal_favorites_path(meal.id), method: :delete do %>
              <i class="fas fa-heart"></i><%= meal.favorites.count %>
            <% end %>
          </p>
        <% else %>
          <p>
            いいね数:
            <%= link_to meal_favorites_path(meal.id), method: :post do %>
              <i class="far fa-heart"></i><%= meal.favorites.count %>
            <% end %>
          </p>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>